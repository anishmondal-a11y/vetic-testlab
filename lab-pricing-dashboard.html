<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Lab Pricing Dashboard</title>

<style>

/* ===============================
   ROOT DESIGN SYSTEM
================================ */

:root{
--primary:#E85D75;
--navy:#2C3E50;
--bg:#f7f9fc;
--card:#ffffff;
--success:#27ae60;
--shadow:0 10px 30px rgba(0,0,0,.08);
}

body.dark{
--bg:#121826;
--card:#1c2434;
--navy:#ffffff;
}

*{
box-sizing:border-box;
font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
}

body{
margin:0;
background:var(--bg);
color:var(--navy);
}

/* ===============================
   HEADER
================================ */

.header{
background:linear-gradient(135deg,#E85D75,#f093a6);
padding:28px;
text-align:center;
color:white;
}

.header h1{
margin:0;
font-size:28px;
}

.tag{
opacity:.9;
margin-top:6px;
}

/* ===============================
   LAYOUT
================================ */

.container{
max-width:820px;
margin:auto;
padding:20px;
}

.card{
background:var(--card);
padding:20px;
border-radius:18px;
box-shadow:var(--shadow);
margin-bottom:18px;
}

/* ===============================
   INPUTS
================================ */

select,input{
width:100%;
padding:14px;
border-radius:12px;
border:1px solid #ddd;
font-size:16px;
}

input:focus,select:focus{
outline:none;
border-color:var(--primary);
}

/* autocomplete */

.autocomplete{
position:relative;
}

.suggestions{
position:absolute;
background:white;
width:100%;
max-height:240px;
overflow:auto;
border-radius:12px;
box-shadow:var(--shadow);
display:none;
z-index:999;
}

.suggestion{
padding:12px;
cursor:pointer;
}

.suggestion:hover{
background:#f2f2f2;
}

/* ===============================
   PRICE CARDS
================================ */

.price{
font-size:32px;
font-weight:700;
color:var(--primary);
}

.mrp{
font-size:22px;
}

.save{
color:var(--primary);
font-weight:600;
margin-top:8px;
}

/* ===============================
   BUTTONS
================================ */

.btns{
display:flex;
gap:10px;
flex-wrap:wrap;
margin-top:10px;
}

.btn{
flex:1;
padding:10px;
border-radius:10px;
border:none;
cursor:pointer;
background:#eef1f6;
}

.btn:hover{
background:var(--primary);
color:white;
}

/* ===============================
   MOBILE
================================ */

@media(max-width:600px){
.header h1{font-size:22px;}
.price{font-size:26px;}
}

.footer{
text-align:center;
opacity:.6;
margin:20px 0;
}

/* toggle */

.toggle{
position:fixed;
right:18px;
top:18px;
background:white;
border-radius:50px;
padding:8px 12px;
cursor:pointer;
box-shadow:var(--shadow);
}

</style>
</head>

<body>

<div class="toggle" onclick="toggleDark()">üåô</div>

<div class="header">
<h1>üêæ Lab Pricing Dashboard</h1>
<div class="tag">Advanced Pricing Tool for Healthcare Professionals</div>
</div>

<div class="container">

<!-- SELECT -->

<div class="card">
<h3>üìã Select Test</h3>

<select id="city"></select>

<div class="autocomplete">
<input id="search" placeholder="üîç Start typing lab test name...">
<div class="suggestions" id="suggestions"></div>
</div>

</div>

<!-- PRICING -->

<div class="card">
<h3>üí∞ Pricing</h3>

<div>MRP</div>
<div class="mrp" id="mrp">‚Äî</div>

<input id="discount" placeholder="Enter discount %" type="number" min="0" max="100">

<div class="btns">
<button class="btn" onclick="quick(5)">5%</button>
<button class="btn" onclick="quick(10)">10%</button>
<button class="btn" onclick="quick(20)">20%</button>
<button class="btn" onclick="quick(25)">25%</button>
</div>

</div>

<!-- FINAL -->

<div class="card">
<h3>‚úÖ Final Price</h3>

<div class="price" id="final">‚Äî</div>
<div class="save" id="save"></div>

<button class="btn" onclick="copyQuote()">Copy Quote</button>

</div>

<div class="footer">
Pro Tip: Save this page to your home screen for app-like experience.
</div>

</div>

<script>

/* ======================================================
 SAMPLE DATA
 Replace with converter output later
====================================================== */

let labTestData = [
{name:"CBC - COMPLETE BLOOD COUNT",city:"Bengaluru",display:true,mrp:850},
{name:"CBC - COMPLETE BLOOD COUNT",city:"Delhi",display:true,mrp:900},
{name:"RAPID TEST KIT FELINE IMMUNODEFICIENCY VIRUS",city:"Bengaluru",display:true,mrp:1999},
{name:"RAPID TEST KIT FELINE PANLEUKOPENIA VIRUS",city:"Mumbai",display:true,mrp:1500},
{name:"THYROID PROFILE TOTAL",city:"Hyderabad",display:true,mrp:1200},
{name:"LIVER FUNCTION TEST",city:"Chennai",display:true,mrp:1100}
];

/* ======================================================
 OPTIONAL GOOGLE SHEETS
 Uncomment and paste CSV link
====================================================== */

// fetch("YOUR_GOOGLE_SHEET_CSV")
// .then(res=>res.text())
// .then(csv=>{
//     const rows = csv.split("\n").slice(1);
//     labTestData = rows.map(r=>{
//         const c=r.split(",");
//         return{
//             name:c[0],
//             city:c[1],
//             display:c[2]=="TRUE",
//             mrp:Number(c[3])
//         }
//     });
//     init();
// });

/* ======================================================
 INIT
====================================================== */

let filtered=[];
let selected=null;

init();

function init(){

const cities=[...new Set(
labTestData.filter(t=>t.display).map(t=>t.city)
)].sort();

const citySelect=document.getElementById("city");

cities.forEach(c=>{
let opt=document.createElement("option");
opt.textContent=c;
citySelect.appendChild(opt);
});

}

/* ======================================================
 SEARCH
====================================================== */

const search=document.getElementById("search");
const suggestions=document.getElementById("suggestions");

search.addEventListener("input",()=>{

const city=document.getElementById("city").value;

filtered=labTestData.filter(t=>
t.display &&
t.city===city &&
t.name.toLowerCase().includes(search.value.toLowerCase())
).slice(0,20);

suggestions.innerHTML="";

filtered.forEach(t=>{
let div=document.createElement("div");
div.className="suggestion";
div.textContent=t.name;
div.onclick=()=>{
selected=t;
search.value=t.name;
suggestions.style.display="none";
showMRP();
};
suggestions.appendChild(div);
});

suggestions.style.display="block";
});

function showMRP(){
document.getElementById("mrp").innerText="‚Çπ"+selected.mrp.toLocaleString();
calc();
}

/* ======================================================
 DISCOUNT
====================================================== */

document.getElementById("discount")
.addEventListener("input",calc);

function quick(v){
document.getElementById("discount").value=v;
calc();
}

function calc(){

if(!selected) return;

let d=Number(document.getElementById("discount").value)||0;
let final=selected.mrp*(1-d/100);
let save=selected.mrp-final;

document.getElementById("final")
.innerText="‚Çπ"+final.toFixed(2);

document.getElementById("save")
.innerText=`You save ‚Çπ${save.toFixed(2)} (${d}% off)`;

}

/* ======================================================
 DARK MODE
====================================================== */

function toggleDark(){
document.body.classList.toggle("dark");
}

/* ======================================================
 COPY QUOTE
====================================================== */

function copyQuote(){

if(!selected) return alert("Select a test first");

let final=document.getElementById("final").innerText;

navigator.clipboard.writeText(
`${selected.name}
City: ${selected.city}
Final Price: ${final}`
);

alert("Quote copied!");
}

</script>

</body>
</html>
